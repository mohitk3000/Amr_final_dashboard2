{"ast":null,"code":"var _jsxFileName = \"/home/mohit/Downloads/AMRbot_dashboard/src/components/Teleoperation.jsx\";\nimport React, { Component } from 'react';\nimport { Joystick } from 'react-joystick-component';\nimport config from \"../scripts/config\";\nimport './style.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Connection extends Component {\n  constructor() {\n    super();\n    this.state = {\n      ros: new window.ROSLIB.Ros(),\n      connection: false\n    };\n    this.handleMove = this.handleMove.bind(this);\n    this.handleStop = this.handleStop.bind(this);\n    this.view_map = this.view_map.bind(this);\n  }\n  componentDidMount() {\n    this.initConnection();\n    const mapTopic = new window.ROSLIB.Topic({\n      ros: this.state.ros,\n      name: \"/map\",\n      messageType: \"nav_msgs/OccupancyGrid\"\n    });\n    mapTopic.subscribe(message => {\n      // Log received map data to the console\n      console.log(\"Received Map Data: \", message);\n      console.log(\"haare krishna\");\n    });\n  }\n  initConnection() {\n    const {\n      ros\n    } = this.state;\n    try {\n      ros.connect('ws://' + config.ROSBRIDGE_SERVER_IP + ':9090');\n      ros.on('connection', () => {\n        console.log('Connected to ROS Bridge.');\n        // this.setState({ connection: true });\n      });\n\n      ros.on('close', () => {\n        console.log('Connection to ROS Bridge closed.');\n        // this.setState({ connection: false });\n      });\n\n      ros.on('error', error => {\n        console.error('Error connecting to ROS Bridge:', error);\n      });\n    } catch (error) {\n      console.error('Error connecting to ROS Bridge:', error);\n    }\n  }\n  handleMove(event) {\n    const {\n      ros\n    } = this.state;\n    try {\n      const cmdVel = new window.ROSLIB.Topic({\n        ros: ros,\n        name: '/cmd_vel',\n        messageType: 'geometry_msgs/Twist'\n      });\n\n      // Adjust the linear and angular velocities based on joystick movement\n      const twist = new window.ROSLIB.Message({\n        linear: {\n          x: event.y,\n          y: 0.0,\n          z: 0.0\n        },\n        angular: {\n          x: 0.0,\n          y: 0.0,\n          z: -event.x\n        }\n      });\n      cmdVel.publish(twist);\n      console.log('Twist message published successfully.');\n    } catch (error) {\n      console.error('Error publishing Twist message:', error);\n    }\n  }\n  handleStop(event) {\n    // Your stop handling logic here...\n    const {\n      ros\n    } = this.state;\n    try {\n      const cmdVel = new window.ROSLIB.Topic({\n        ros: ros,\n        name: '/cmd_vel',\n        messageType: 'geometry_msgs/Twist'\n      });\n      const twist = new window.ROSLIB.Message({\n        linear: {\n          x: 0.0,\n          // Scale the joystick value for linear velocity\n          y: 0.0,\n          z: 0.0\n        },\n        angular: {\n          x: 0.0,\n          y: 0.0,\n          z: 0.0 // Scale the joystick value for angular velocity\n        }\n      });\n\n      cmdVel.publish(twist);\n      console.log('Twist message published successfully.');\n    } catch (error) {\n      console.error('Error publishing Twist message:', error);\n    }\n  }\n  publishtostop() {\n    const {\n      ros\n    } = this.state;\n    const goalId = new window.ROSLIB.Message({\n      id: '',\n      // Leave it empty to cancel all goals\n      stamp: {\n        sec: 0,\n        // Set the seconds field to zero\n        nsec: 0 // Set the nanoseconds field to zero\n      }\n    });\n\n    // Create a Topic to publish the GoalID message\n    const topic = new window.ROSLIB.Topic({\n      ros: ros,\n      name: '/move_base/cancel',\n      messageType: 'actionlib_msgs/GoalID'\n    });\n\n    // Publish the GoalID message\n    topic.publish(goalId);\n  }\n  view_map() {\n    var viewer = new window.ROS2D.Viewer({\n      divID: \"nav_div3\",\n      width: 155,\n      height: 299\n    });\n    var navClient = new window.NAV2D.OccupancyGridClientNav({\n      ros: this.state.ros,\n      rootObject: viewer.scene,\n      viewer: viewer,\n      topic: \"/map\",\n      // Correct the property name here\n      withOrientation: true\n    });\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Joystick, {\n        size: 100,\n        sticky: true,\n        baseColor: \"#EEEEEE\",\n        stickColor: \"#BBBBBB\",\n        move: this.handleMove,\n        stop: this.handleStop\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"nav_div3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"stop-button\",\n        onClick: this.publishtostop,\n        children: \"Stop\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default Connection;","map":{"version":3,"names":["React","Component","Joystick","config","jsxDEV","_jsxDEV","Connection","constructor","state","ros","window","ROSLIB","Ros","connection","handleMove","bind","handleStop","view_map","componentDidMount","initConnection","mapTopic","Topic","name","messageType","subscribe","message","console","log","connect","ROSBRIDGE_SERVER_IP","on","error","event","cmdVel","twist","Message","linear","x","y","z","angular","publish","publishtostop","goalId","id","stamp","sec","nsec","topic","viewer","ROS2D","Viewer","divID","width","height","navClient","NAV2D","OccupancyGridClientNav","rootObject","scene","withOrientation","render","children","size","sticky","baseColor","stickColor","move","stop","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick"],"sources":["/home/mohit/Downloads/AMRbot_dashboard/src/components/Teleoperation.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Joystick } from 'react-joystick-component';\nimport config from \"../scripts/config\";\nimport './style.css';\n\nclass Connection extends Component {\n  constructor() {\n    super();\n    this.state = {\n      ros: new window.ROSLIB.Ros(),\n      connection: false,\n    };\n\n    this.handleMove = this.handleMove.bind(this);\n    this.handleStop = this.handleStop.bind(this);\n    this.view_map=this.view_map.bind(this)\n  }\n\n  componentDidMount() {\n    this.initConnection();\n    const mapTopic = new window.ROSLIB.Topic({\n      ros: this.state.ros,\n      name: \"/map\",\n      messageType: \"nav_msgs/OccupancyGrid\",\n    });\n\n    mapTopic.subscribe((message) => {\n      // Log received map data to the console\n      console.log(\"Received Map Data: \", message);\n      console.log(\"haare krishna\");\n    });\n  }\n\n  initConnection() {\n    const { ros } = this.state;\n\n    try {\n      ros.connect('ws://'+config.ROSBRIDGE_SERVER_IP+':9090');\n\n      ros.on('connection', () => {\n        console.log('Connected to ROS Bridge.');\n        // this.setState({ connection: true });\n      });\n\n      ros.on('close', () => {\n        console.log('Connection to ROS Bridge closed.');\n        // this.setState({ connection: false });\n      });\n\n      ros.on('error', (error) => {\n        console.error('Error connecting to ROS Bridge:', error);\n      });\n    } catch (error) {\n      console.error('Error connecting to ROS Bridge:', error);\n    }\n  }\n\n  handleMove(event) {\n    const { ros } = this.state;\n  \n    try {\n      const cmdVel = new window.ROSLIB.Topic({\n        ros: ros,\n        name: '/cmd_vel',\n        messageType: 'geometry_msgs/Twist',\n      });\n  \n     \n  \n      // Adjust the linear and angular velocities based on joystick movement\n      const twist = new window.ROSLIB.Message({\n        linear: {\n          x: event.y,\n          y: 0.0,\n          z: 0.0,\n        },\n        angular: {\n          x: 0.0,\n          y: 0.0,\n          z: -event.x,\n        },\n      });\n  \n      cmdVel.publish(twist);\n      console.log('Twist message published successfully.');\n    } catch (error) {\n      console.error('Error publishing Twist message:', error);\n    }\n  }\n  \n\n  handleStop(event) {\n    // Your stop handling logic here...\n    const { ros } = this.state;\n\n    try {\n      const cmdVel = new window.ROSLIB.Topic({\n        ros: ros,\n        name: '/cmd_vel',\n        messageType: 'geometry_msgs/Twist',\n      });\n\n      const twist = new window.ROSLIB.Message({\n        linear: {\n          x: 0.0, // Scale the joystick value for linear velocity\n          y: 0.0,\n          z: 0.0,\n        },\n        angular: {\n          x: 0.0,\n          y: 0.0,\n          z: 0.0, // Scale the joystick value for angular velocity\n        },\n      });\n\n      cmdVel.publish(twist);\n      console.log('Twist message published successfully.');\n    } catch (error) {\n      console.error('Error publishing Twist message:', error);\n    }\n  }\n\n\n  publishtostop() {\n    const { ros } = this.state;\n    const goalId = new window.ROSLIB.Message({\n      id: '', // Leave it empty to cancel all goals\n      stamp: {\n        sec: 0,  // Set the seconds field to zero\n        nsec: 0  // Set the nanoseconds field to zero\n      }\n    });\n    \n    // Create a Topic to publish the GoalID message\n    const topic = new window.ROSLIB.Topic({\n      ros: ros,\n      name: '/move_base/cancel',\n      messageType: 'actionlib_msgs/GoalID'\n    });\n    \n    \n    // Publish the GoalID message\n    topic.publish(goalId);\n  }\n  view_map(){\n    var viewer=new window.ROS2D.Viewer({\n      divID:\"nav_div3\",\n      width:155,\n      height:299,\n    });\n    var navClient = new window.NAV2D.OccupancyGridClientNav({\n      ros: this.state.ros,\n      rootObject: viewer.scene,\n      viewer: viewer,\n      topic: \"/map\", // Correct the property name here\n      withOrientation: true,\n    });\n    \n    \n    \n  }\n  \n\n  render() {\n    return (\n      <div>\n        <Joystick\n          size={100}\n          sticky={true}\n          baseColor=\"#EEEEEE\"\n          stickColor=\"#BBBBBB\"\n          move={this.handleMove}\n          stop={this.handleStop}\n        ></Joystick>\n         <div id=\"nav_div3\"></div>\n         <button className=\"stop-button\" onClick={this.publishtostop}>\n         Stop\n      </button>\n         \n\n        \n      </div>\n    );\n  }\n}\n\nexport default Connection;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}